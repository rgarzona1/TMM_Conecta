{% extends "general.html" %}
{% load static %}

{% block title %}Talleres y Eventos | TMM{% endblock %}


{% block content %}
<section class="catalogo-container"> 
    
    <h1>PrÃ³ximos Talleres Presenciales</h1>
    
    <p class="text-center" style="color: #666; font-size: 1.1em; margin-bottom: 30px;">
        Genera momentos de conexiÃ³n y autocuidado a travÃ©s de la creatividad.
    </p>

    <div class="catalogo-grid"> 
        {% for taller in talleres %}
        
        <div class="taller-card" data-delay="{{ forloop.counter0|add:'0.1' }}s"> 
            
            <a href="{% url 'detalle_taller' taller_id=taller.id %}">
                {% if taller.imagen %}
                    <img src="{{ taller.imagen.url }}" alt="{{ taller.taller_base.titulo }}">
                {% else %}
                    <img src="{% static 'img/placeholder_taller.jpg' %}" alt="Taller">
                {% endif %}
            </a>

            <div class="taller-nombre">
                {{ taller.taller_base.titulo }}
            </div>
            
            <div class="taller-info">
                
                <p>{{ taller.descripcion_completa|truncatewords:20 }}</p>
                
                {% if taller.fecha_proxima %}
                <div style="margin-bottom: 15px; padding: 12px; background: linear-
                gradient(135deg, #fff3f8 0%, #ffe6f0 100%); border-radius: 10px; text-align: center; border: 1px solid #ffddea;">
                    <div style="font-size: 1.8rem; margin-bottom: 5px;">ðŸ“…</div>
                    <div style="color: #ce80b0; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 3px;">PrÃ³xima fecha</div>
                    <div style="color: #333; font-size: 1rem; font-weight: 700;">{{ taller.fecha_proxima|date:"d/m/Y" }}</div>
                </div>
                {% endif %}
                
                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                    
                    <span style="font-size: 1.5rem; font-weight: bold; color: #ce80b0;">
                        ${{ taller.precio|floatformat:0 }} CLP
                    </span>
                    
                    <a href="{% url 'detalle_taller' taller_id=taller.id %}" class="btn-ver-detalles">
                        Ver Detalles
                    </a>
                </div>
            </div>
        </div>
        
        {% empty %}
            <div style="grid-column: 1 / -1; text-align: center; padding: 40px; background-color: #f5f5f5; border-radius: 10px;">
                Â¡AÃºn no tenemos talleres programados! Vuelve pronto.
            </div>
        {% endfor %}
    </div> 
</section>
{% endblock content %}