{% extends 'general.html' %}
{% load static %}

{% block title %}TMM · Inicio{% endblock %}

{% block content %}
<main id="inicio">
    <!-- ======= HERO ======= -->
    <section class="hero">
        <img class="hero__bg" src="{% static 'img/resin1.jpg' %}" alt="">
        <div class="wrap hero__inner">
            <div class="hero__text">
                <h1 class="display">TMM Bienestar y Conexión</h1>
                <div class="hero__bullets">
                    <p>En TMM bienestar y belleza creemos que el bienestar se construye desde la creatividad, la conexión y el cuidado personal...</p>
                </div>
                <a href="#talleres" class="btn-vamos">Vamos!</a>
            </div>
        </div>
    </section>

    <!-- ======= EXPERIENCIA TMM ======= -->
    <section id="experiencia" class="experience-section">
        <div class="wrap">
            <h2 class="carousel-title">Vive la Experiencia TMM</h2>

            <div class="carousel-container">
                <div class="carousel">
                    <div class="carousel-item">
                        <img src="{% static 'img/carousel/carusel1.jpg' %}" alt="Experiencia TMM 1">
                    </div>
                    <div class="carousel-item">
                        <img src="{% static 'img/carousel/carusel2.jpg' %}" alt="Experiencia TMM 2">
                    </div>
                    <div class="carousel-item">
                        <img src="{% static 'img/carousel/carusel3.jpg' %}" alt="Experiencia TMM 3">
                    </div>
                    <div class="carousel-item">
                        <img src="{% static 'img/carousel/carusel4.jpg' %}" alt="Experiencia TMM 4">
                    </div>
                </div>
                
                <button class="carousel-btn prev" aria-label="Anterior">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="carousel-btn next" aria-label="Siguiente">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>

            <div class="carousel-dots">
                <button class="carousel-dot active" data-index="0"></button>
                <button class="carousel-dot" data-index="1"></button>
                <button class="carousel-dot" data-index="2"></button>
                <button class="carousel-dot" data-index="3"></button>
            </div>
        </div>
    </section>

    <!-- ======= NOSOTROS ======= -->
    <section id="nosotros" class="about">
        <div class="wrap about__grid">
            <div class="about__img">
                <img src="{% static 'img/ChatGPT Image 22 oct 2025, 11_58_58 p.m..png' %}" alt="Imagen nosotros">
            </div>
            <div class="about__text">
                <h2 class="title">¿Quiénes somos?</h2>
                <p>Somos una organización dedicada a promover el bienestar personal y laboral a través de experiencias prácticas de autocuidado, creatividad y conexión emocional. Nos enfocamos en crear espacios donde las personas puedan desconectarse del estrés cotidiano y reconectarse con su bienestar interior, combinando técnicas manuales con dinámicas que fomentan la relajación y el trabajo en equipo.</p>
                <h3 class="eyebrow">Nuestra misión</h3>
                <div class="about__bullets">
                    <p>Nuestra misión es impulsar el equilibrio y la salud emocional mediante talleres y actividades significativas que fortalezcan el bienestar integral de cada participante. Buscamos ser un referente en experiencias que integren la creatividad, la calma y la conexión humana, adaptándonos a las necesidades de personas y organizaciones que valoran la calidad de vida.</p>
                    <p>Ofrecemos una amplia variedad de talleres de autocuidado y desarrollo personal, tanto para particulares como para equipos de trabajo. Cada experiencia es diseñada para generar un ambiente cálido, participativo y transformador.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- ======= FUNDADORA ======= -->
    <section class="fundadora">
        <div class="wrap fundadora__grid">
            <div class="fundadora__text">
                <h2 class="title">Nuestra Fundadora</h2>
                <h3 class="eyebrow">La historia detrás de TMM</h3>
                <div class="fundadora__content">
                    <p>TMM Bienestar y Conexión nació desde la búsqueda personal de su fundadora, Carito López. Después de muchos años enseñando, ella descubrió que lo más valioso no era solo el aprendizaje de técnicas, sino ayudar a las mujeres a volver a sentirse capaces, tranquilas y felices.</p>
                    <p>El propósito de TMM es ofrecerte un espacio donde puedas pausar el ritmo, reencontrarte contigo y expresarte a través de la creación. Aquí no solo haces algo bonito, sino que vuelves a creer en ti misma.</p>
                    <blockquote class="fundadora__quote">
                        "La verdadera conexión comienza cuando nos permitimos ser auténticos y vulnerables."
                    </blockquote>
                    <p>Lo que diferencia a TMM es que no vienes solo a aprender una técnica, sino a vivir una experiencia de conexión y bienestar. En cada taller se cuida el ambiente, la música, el aroma y la energía del grupo para que sea un espacio para ti, donde se crean con las manos y se sanan cargas.</p>
                </div>
            </div>
            <div class="fundadora__img">
                <img src="{% static 'img/foto_about.jpg' %}" alt="Fundadora TMM">
                <div class="fundadora__caption">
                    <h4>Carolina López Perez</h4>
                    <p>Fundadora y Directora de TMM</p>
                </div>
            </div>
        </div>
    </section>

     <!-- ======= FRASE INSPIRADORA / SLIDER ======= -->
    <section id="inspiracion" class="inspiration">
        <div class="wrap inspiration__inner">
            <div class="inspiration__slider" aria-live="polite">
                <div class="slide">"Eres tu propio mejor proyecto"</div>
                <div class="slide">"Conecta contigo: crea, respira y renueva"</div>
                <div class="slide">"La creatividad es una práctica de cuidado"</div>
                <div class="slide">"No tienes que poder con todo, tambien puedes detenerte y respirar"</div>
                <div class="slide">"Pequeños actos de autocuidado generan grandes cambios"</div>
            </div>
        </div>
    </section>

    <!-- ======= TALLERES ======= -->
    <section id="talleres" class="section">
        <div class="wrap">
            <h2 class="section__title">Nuestros talleres</h2>
            {% if talleres %}
            <div class="cards">
                {% for t in talleres|slice:":3" %}
                <article class="card niche">
                    <div class="niche__top">
                        {% if t.imagen %}
                            <img src="{{ t.imagen.url }}" alt="{{ t.titulo }}">
                        {% else %}
                            <img src="{% static 'img/placeholder-taller.jpg' %}" alt="{{ t.titulo|default:'Taller' }}">
                        {% endif %}
                    </div>
                    <div class="card__body">
                        <h3 class="card__title">{{ t.titulo }}</h3>
                        <p class="card__text">{{ t.descripcion|truncatechars:130 }}</p>
                        <div class="card__cta">
                            <a class="btn-vamos" href="tienda/talleres">Mas información</a>
                        </div>
                    </div>
                </article>
                {% endfor %}
            </div>
            {% else %}
            <p class="muted wrap">Aún no hay talleres activos. Cárgalos en el admin.</p>
            {% endif %}
            <div class="center">
                <a class="btn-vamos" href="tienda/talleres">Ver Todo Talleres</a>
            </div>
        </div>
    </section>

    <!-- ======= RESEÑAS ======= -->
    <section id="resenas" class="testimonials">
        <div class="wrap">
            <h2 class="section__title">Experiencias TMM</h2>
            <div class="testimonials__grid">
                {% if resenas %}
                    {% for resena in resenas %}
                        <div class="testimonial-card">
                            <div class="testimonial-card__header">
                                {% if resena.usuario.avatar %}
                                    <img src="{{ resena.usuario.avatar.url }}" alt="Avatar de {{ resena.usuario.username }}" class="testimonial-avatar">
                                {% else %}
                                    <div class="testimonial-avatar-placeholder">
                                        {{ resena.usuario.username|make_list|first|upper }}
                                    </div>
                                {% endif %}
                                <div class="testimonial-info">
                                    <h4>{{ resena.usuario.username }}</h4>
                                    <p class="taller-name">{{ resena.taller.titulo }}</p>
                                </div>
                            </div>
                            <div class="testimonial-rating">
                                {% for i in "12345"|make_list %}
                                    {% if forloop.counter <= resena.calificacion %}
                                        <i class="fas fa-star"></i>
                                    {% else %}
                                        <i class="far fa-star"></i>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <blockquote class="testimonial-text">
                                "{{ resena.comentario }}"
                            </blockquote>
                            <p class="testimonial-date">{{ resena.fecha|date:"F Y" }}</p>
                        </div>
                    {% endfor %}
                {% else %}
                    <p class="no-reviews">Sé el primero en compartir tu experiencia TMM</p>
                {% endif %}
            </div>
           
                <div class="review-cta">
                    <h3>¿Has participado en alguno de nuestros talleres?</h3>
                    <p>Comparte tu experiencia y ayuda a otros a encontrar su camino hacia el bienestar</p>
                    {% if user.is_authenticated %}
                    <a href="{% url 'crear_resena' %}" class="btn-vamos">Dejar mi reseña</a>
                    {% else %}
                    <a href="{% url 'login' %}" class="btn-vamos">Inicia sesión para dejar una reseña</a>
                    {% endif %}
                </div>
        </div>
    </section>

    <!-- ======= CTA / CONTACTO ======= -->
    <section id="contacto" class="cta">
        <div class="wrap cta__grid">
            <div class="cta__left">
                <h2 class="title">¿Listo para iniciar tu viaje hacia el bienestar?</h2>
                <p>Estamos aquí para acompañarte en tu camino hacia una vida más equilibrada y plena. Ya sea para ti o tu organización, descubre cómo podemos crear juntos experiencias significativas.</p>
                <a href="contacto" class="cta__btn">Contactanos Aquí!</a>
            </div>
            <div class="cta__right">
                <img src="{% static 'img/contacto.png' %}" alt="imagen de contacto" class="cta__img">
            </div>
        </div>
    </section>

    <script>
    class Carousel {
        constructor(container) {
            this.container = container;
            this.items = container.querySelectorAll('.carousel-item');
            this.prevBtn = container.querySelector('.carousel-btn.prev');
            this.nextBtn = container.querySelector('.carousel-btn.next');
            this.dots = container.querySelectorAll('.carousel-dot');
            
            this.currentIndex = 0;
            this.totalItems = this.items.length;
            this.isAnimating = false;
            
            this.init();
        }
        
        init() {
            this.updatePositions();
            
            this.prevBtn.addEventListener('click', () => this.prev());
            this.nextBtn.addEventListener('click', () => this.next());
            
            this.dots.forEach((dot, index) => {
                dot.addEventListener('click', () => this.goTo(index));
            });
            
            this.startAutoplay();
            
            this.container.addEventListener('mouseenter', () => this.stopAutoplay());
            this.container.addEventListener('mouseleave', () => this.startAutoplay());
        }
        
        updatePositions() {
            this.items.forEach((item, index) => {
                item.classList.remove('active', 'prev', 'next');
                
                if (index === this.currentIndex) {
                    item.classList.add('active');
                } else if (index === this.getPrevIndex()) {
                    item.classList.add('prev');
                } else if (index === this.getNextIndex()) {
                    item.classList.add('next');
                }
            });
            
            this.dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === this.currentIndex);
            });
        }
        
        getPrevIndex() {
            return (this.currentIndex - 1 + this.totalItems) % this.totalItems;
        }
        
        getNextIndex() {
            return (this.currentIndex + 1) % this.totalItems;
        }
        
        next() {
            if (this.isAnimating) return;
            
            this.isAnimating = true;
            this.currentIndex = this.getNextIndex();
            this.updatePositions();
            
            setTimeout(() => {
                this.isAnimating = false;
            }, 500);
        }
        
        prev() {
            if (this.isAnimating) return;
            
            this.isAnimating = true;
            this.currentIndex = this.getPrevIndex();
            this.updatePositions();
            
            setTimeout(() => {
                this.isAnimating = false;
            }, 500);
        }
        
        goTo(index) {
            if (this.isAnimating || index === this.currentIndex) return;
            
            this.isAnimating = true;
            this.currentIndex = index;
            this.updatePositions();
            
            setTimeout(() => {
                this.isAnimating = false;
            }, 500);
        }
        
        startAutoplay() {
            this.stopAutoplay();
            this.autoplayInterval = setInterval(() => this.next(), 5000);
        }
        
        stopAutoplay() {
            if (this.autoplayInterval) {
                clearInterval(this.autoplayInterval);
            }
        }
    }

    // Inicializar carrusel
    document.addEventListener('DOMContentLoaded', function() {
        const carouselContainer = document.querySelector('.carousel-container');
        new Carousel(carouselContainer);
    });
    </script>

</main>
{% endblock %}